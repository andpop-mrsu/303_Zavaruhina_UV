drop table if exists employees;
drop table if exists service;
drop table if exists schedule;
drop table if exists employee_specialization;
drop table if exists work_accounting;

pragma keys=on;

create table employees (
  id integer primary key,
  surname varchar(40),
  name varchar(40),
  patronymic varchar(40) null,
  date_of_birth date null,
  phone_number varchar(11) null,
  salary_percent float,
  gender varchar(2) null,
  dissmiss_date date null,

  check (gender = 'М' or gender = 'Ж' or gender = 'МЖ'),
  check (salary_percent >= 0.0 and salary_percent <= 100.0)
);
	
create table service (
  id integer primary key,
  service_name varchar,
  price float,
  duration_of_service float
);

create table employee_specialization (
  id integer primary key,
  id_employees integer,
  id_service integer,
  
  foreign key (id_employees) references employees (id),
  foreign key(id_service)  references service(id)
);

create table schedule (
  id integer primary key,
  id_employees integer,
  date_of_recording date,
  start_work_time time null default '08:00',
  end_work_time time null default '19:00',
  
  foreign key (id_employees) references employees (id)
);

create table work_accounting (
  id integer primary key,
  id_employees integer,
  id_service integer,
  date_of_recording date,
  start_work_time time null,
  end_work_time time null,
  work_state varchar(30) null default 'запланировано',
  client_surname varchar(40) null,
  client_name varchar(40) null,
  client_patronymic varchar(40) null,
  client_phone_number varchar(11) null,
  
  foreign key (id_employees) references employees (id),
  foreign key(id_service)  references service(id),
  
  check (work_state = 'в процессе работы' or work_state = 'запланировано' or work_state = 'завершено' or work_state = 'отмена')
);

insert into employees (id, surname, name, patronymic, date_of_birth , phone_number, salary_percent , gender) values
(0, 'Петров', 'Владимир', 'Андреевич', '1999-06-10', '89565679028', 74, 'М'),
(1, 'Калинина','Мария', 'Петровна', '1995-03-11', '89567658398', 45, 'МЖ'),
(2, 'Тулова', 'Екатерина', 'Сергеевна', '1996-11-03', '89177893425', 25, 'Ж'),
(3, 'Залов', 'Александр', 'Сергеевич', '1995-11-11', '89176653425', 50, 'М'),
(4, 'Захарова', 'Валентина', 'Александровна', '1998-06-25', '89196654333', 35, 'Ж'),
(5, 'Инокова', 'Анастасия', 'Ивановна', '1998-10-01', '89625396105', 75, 'Ж'),
(6, 'Камушкин', 'Евгений', 'Николаевич', '1997-04-01', '89177645682', 60, 'М'),
(7, 'Летова', 'Алина', 'Моисеевна', '1999-03-21', '89137054325', 65, 'Ж'),
(8, 'Соколова', 'Дарья', 'Олеговна', '1994-02-19', '89545436729', 50, 'МЖ'),
(9, 'Самсонов', 'Владислав', 'Сергеевич', '1998-02-03', '89170397644', 65, 'М'),
(10, 'Кутова', 'Марина', 'Вячеславовна', '1993-01-12', '89565941333', 80, 'МЖ');

insert into service (id, service_name, price, duration_of_service) values
(0, 'Женская стрижка + укладка', 1100, 2.5),
(1, 'мужская стрижка', 700, 1),
(2, 'окрашивание в один тон "короткие волосы"', 1300, 2),
(3, 'окрашивание в один тон "волосы средней длины"', 1500, 2.5),
(4, 'окрашивание в один тон "длинные волосы"', 1500, 3),
(5, 'мужская укладка', 250, 0.5),
(6, 'оформление бороды', 400, 1),
(7, 'окрашивание корней', 1000, 1.5),
(8, 'комплексный уход за волосами', 1200, 1.5),
(9, 'двойное окрашивание', 2000, 3),
(10, 'легкие локоны', 1000, 1.5);

insert into employee_specialization (id, id_employees, id_service) values
(0, 0, 5),
(1, 0, 6),
(2, 1, 0),
(3, 1, 6),
(4, 1, 8),
(5, 2, 2),
(6, 2, 3),
(7, 2, 4),
(8, 3, 5),
(9, 4, 10),
(10, 4, 9),
(11, 4, 0),
(12, 5, 0),
(13, 5, 3),
(14, 5, 7),
(15, 6, 5),
(16, 6, 6),
(17, 7, 8),
(18, 7, 9),
(19, 8, 10),
(20, 8, 6),
(21, 9, 5),
(22, 9, 1),
(23, 10, 6),
(24, 10, 7),
(25, 10, 6);


insert into schedule(id, id_employees, date_of_recording, start_work_time, end_work_time) values
(0, 0, '2021-07-11', '08:00', '14:00'),
(1, 2, '2021-07-11', '10:00', '16:00'),
(2, 4, '2021-07-11', '12:00', '18:00'),
(3, 5, '2021-07-11', '08:00', '18:00'),
(4, 6, '2021-07-11', '12:00', '18:00'),
(5, 8, '2021-07-11', '14:00', '19:00'),
(6, 9, '2021-07-11', '11:30', '18:30'),

(7, 1, '2021-07-12', '09:30', '16:00'),
(8, 3, '2021-07-12', '08:00', '18:00'),
(9, 4, '2021-07-12', '14:40', '17:00'),
(10, 5, '2021-07-12', '08:00', '18:00'),
(11, 7, '2021-07-12', '12:00', '18:00'),
(12, 8, '2021-07-12', '08:00', '13:00'),
(13, 10, '2021-07-12', '08:00', '19:00'),

(14, 0, '2021-07-13', '08:30', '13:45'),
(15, 2, '2021-07-13', '08:00', '18:00'),
(16, 4, '2021-07-13', '12:00', '19:00'),
(17, 5, '2021-07-13', '08:00', '18:00'),
(18, 6, '2021-07-13', '12:00', '14:30'),
(19, 8, '2021-07-13', '09:00', '13:00'),

(20, 1, '2021-07-14', '08:00', '13:00'),
(21, 3, '2021-07-14', '08:15', '14:00'),
(22, 4, '2021-07-14', '12:00', '18:00'),
(23, 5, '2021-07-14', '08:00', '15:00'),
(24, 7, '2021-07-14', '12:50', '18:00'),
(25, 8, '2021-07-14', '08:00', '13:00'),
(26, 10, '2021-07-14', '08:00', '18:00'),

(27, 0, '2021-07-15', '12:00', '18:00'),
(28, 2, '2021-07-15', '08:00', '18:00'),
(29, 4, '2021-07-15', '12:00', '18:00'),
(30, 5, '2021-07-15', '08:00', '18:00'),
(31, 6, '2021-07-15', '12:00', '18:00'),
(32, 8, '2021-07-15', '08:00', '13:00'),
(33, 9, '2021-07-15', '08:00', '18:00'),

(34, 0, '2021-07-16', '08:00', '11:00'),
(35, 2, '2021-07-16', '11:00', '18:00'),
(36, 4, '2021-07-16', '13:00', '19:00'),
(37, 5, '2021-07-16', '08:00', '13:00'),

(38, 1, '2021-07-17', '09:00', '17:00'),
(39, 3, '2021-07-17', '08:30', '13:00'),
(40, 6, '2021-07-17', '13:00', '19:00'),
(41, 8, '2021-07-17', '13:00', '18:00'),

(42, 2, '2021-07-18', '09:00', '15:00'),
(43, 4, '2021-07-18', '08:30', '13:00'),
(44, 6, '2021-07-18', '13:00', '16:40'),
(45, 9, '2021-07-18', '14:30', '19:00');


insert into work_accounting(id, id_employees, id_service, date_of_recording, start_work_time, end_work_time, work_state, client_surname, client_name, client_patronymic, client_phone_number) values
(0, 8, 10, '2021-07-11', '15:00', '16:30', 'завершено', 'Акимова', 'Маргарита', 'Владимировна', '89631454720'),
(1, 0, 5, '2021-07-16', '08:00', '08:30', 'завершено', 'Борисов', 'Александр', 'Петрович', '89174465483'),
(2, 3, 5, '2021-07-17', '09:00', '9:30', 'завершено', 'Гусев', 'Максим', 'Александрович', '89136556722'),
(3, 4, 10, '2021-07-18', '09:00', '10:30', 'завершено', 'Головнева', 'Мария', 'Михайловна', '89510573444'),
(4, 6, 6, '2021-07-18', '14:00', '15:00', 'завершено', 'Гарин', 'Андрей', 'Иванович', '89173263389'),
(5, 9, 1, '2021-07-15', '10:00', '11:00', 'завершено', 'Викторов', 'Аркадий', 'Сергеевич', '89276986515'),
(6, 5, 7, '2021-07-12', '14:00', '15:30', 'завершено', 'Дворина', 'Алина', 'Алексеевна', '89524553609'),
(7, 2, 3, '2021-07-11', '11:00', '13:30', 'завершено', 'Ефанова', 'Юлия', 'Павловна', '89157729854'),
(8, 4, 9, '2021-07-16', '13:00', '16:00', 'завершено', 'Сухова', 'Антонина', 'Петровна', '89150073708'),
(9, 3, 5, '2021-07-12', '12:00', '12:30', 'завершено', 'Искин', 'Кирилл', 'Миронович', '89630763607'),
(10, 7, 8, '2021-07-12', '12:00', '13:30', 'завершено', 'Казакова', 'Ирина', 'Дмитриевна', '89625134492'),
(11, 10, 6, '2021-07-14', '17:00', '18:00', 'завершено', 'Краскин', 'Анатолий', 'Алексеевич', '89271354675'),
(12, 0, 5, '2021-07-16', '09:30', '10:00', 'завершено', 'Козин', 'Данила', 'Владимирович', '89782361125'),
(13, 1, 0, '2021-07-14', '08:00', '10:30', 'завершено', 'Паласова', 'Василиса', 'Ивановна', '89941627189');